<!DOCTYPE html><html lang="en-US" class="dark"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Rust for HelenOS</title><link rel="canonical" href="https://mvolfik.github.io/"><link rel="icon" type="image/jpeg" sizes="64x64" href="/favicon.jpg"><meta name="description" content="As my Bachelor Thesis, I worked on adding support for the [HelenOS operating system](https://www.helenos.org) to the Rust compiler. My work has successfully enabled easy compilation of Rust programs for HelenOS, including GUI programs written with the Iced UI framework. This project had me digging in the internals of the Rust standard library as well as HelenOS system API implementations. I also needed to gain a good understanding of the ELF binary format, the linking procedure and generally, as a result of this thesis I have solid experience with many systems programming topics.
"><meta property="og:title" content="Rust for HelenOS"><meta property="og:locale" content="en_US"><meta property="og:description" content="As my Bachelor Thesis, I worked on adding support for the [HelenOS operating system](https://www.helenos.org) to the Rust compiler. My work has successfully enabled easy compilation of Rust programs for HelenOS, including GUI programs written with the Iced UI framework. This project had me digging in the internals of the Rust standard library as well as HelenOS system API implementations. I also needed to gain a good understanding of the ELF binary format, the linking procedure and generally, as a result of this thesis I have solid experience with many systems programming topics.
"><meta property="og:url" content="https://mvolfik.github.io/"><meta property="og:site_name" content="Matěj Volf"><meta property="og:type" content="website"><meta property="twitter:title" content="Rust for HelenOS"><script type="module">function i(e,t){if(window.location.hostname==="localhost"||localStorage.getItem("plausible_ignore")==="true")return;const n={name:e,url:window.location.href,domain:"mvolfik.github.io",referrer:document.referrer||null,screen_width:window.innerWidth};t&&(n.props=JSON.stringify(t)),navigator.sendBeacon("https://an.evavolfova.cz/api/event",JSON.stringify(n))}i("pageview");document.addEventListener("click",e=>{if(e.target.href===void 0)return;const t=new URL(e.target.href);t.origin!==window.location.origin&&i("Outbound Link: Click",{url:t.toString()})});document.querySelectorAll("a").forEach(e=>{const t=e.lastChild;t.nodeType===Node.TEXT_NODE&&(t.textContent=t.textContent.trimEnd())});</script><link rel="stylesheet" href="/_astro/archive.CKYBq7hs.css">
<style>body{--tag-1: #099812;--tag-2: #096698;--tag-3: #980980}.wrapper[data-astro-cid-6vkduold]{max-width:50em;margin:0 auto}.banner[data-astro-cid-6vkduold]{margin:calc(-1 * var(--outer-top-margin)) calc(-1 * var(--outer-margin)) 1em;height:min(50vh,20em);position:relative}.banner[data-astro-cid-6vkduold] img{max-width:100%;max-height:100%;object-fit:cover}.banner[data-astro-cid-6vkduold] h1[data-astro-cid-6vkduold]{position:absolute;z-index:5;left:50%;top:55%;transform:translate(-50%,-50%);background-color:var(--bg-lightly-transparent);color:var(--fg-high-contrast);font-variant:small-caps;padding:.6em 1em;border-radius:.1em;text-align:center}main[data-astro-cid-6vkduold]>p img{max-width:100%;height:auto}.metadata[data-astro-cid-6vkduold]{font-size:1.15em}.tags[data-astro-cid-6vkduold]{font-weight:400;font-variant:small-caps;margin:0 .5em}.tags[data-astro-cid-6vkduold]>span[data-astro-cid-6vkduold]:nth-of-type(n){color:var(--tag-3)}.tags[data-astro-cid-6vkduold]>span[data-astro-cid-6vkduold]:nth-of-type(odd){color:var(--tag-2)}.tags[data-astro-cid-6vkduold]>span[data-astro-cid-6vkduold]:nth-of-type(3n+1){color:var(--tag-1)}
._switchLabel_zxb4a_1{display:block;position:absolute;top:1.5em;right:3em;z-index:99;background-color:var(--bg-lightly-transparent);color:var(--fg-high-contrast);padding:.3em .6em .3em .3em;border-radius:.2em;cursor:pointer}@media not print{html.dark ._switchLabel_zxb4a_1{color:#fff}}@media not screen{._switchLabel_zxb4a_1{display:none}}
</style></head> <body> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="swvlo" component-url="/_astro/DarkModeSwitch.myvWb0OF.js" component-export="default" renderer-url="/_astro/client.CJc7N0Z8.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;DarkModeSwitch&quot;,&quot;value&quot;:true}"></astro-island>  <div class="wrapper" data-astro-cid-6vkduold> <h1 data-astro-cid-6vkduold>Rust for HelenOS</h1> <main data-astro-cid-6vkduold> <p class="noprint" data-astro-cid-6vkduold> <a href="/" data-astro-cid-6vkduold>&larr; back to homepage</a> </p> <p class="metadata" data-astro-cid-6vkduold>
Tags: <span class="tags" data-astro-cid-6vkduold> <span data-astro-cid-6vkduold>Rust</span>, <span data-astro-cid-6vkduold>Operating System development</span> </span> </p> <p class="metadata" data-astro-cid-6vkduold>Timespan: May 2024 – May 2025</p> <p class="metadata" data-astro-cid-6vkduold> <a target="_blank" href="/s/b-thesis.pdf" data-astro-cid-6vkduold> Full thesis text </a> | <a target="_blank" href="/s/b-poster.pdf" data-astro-cid-6vkduold> Project poster </a> </p> <p data-astro-cid-6vkduold><p>As my Bachelor Thesis, I worked on adding support for the <a href="https://www.helenos.org">HelenOS operating system</a> to the Rust compiler. My work has successfully enabled easy compilation of Rust programs for HelenOS, including GUI programs written with the Iced UI framework. This project had me digging in the internals of the Rust standard library as well as HelenOS system API implementations. I also needed to gain a good understanding of the ELF binary format, the linking procedure and generally, as a result of this thesis I have solid experience with many systems programming topics.</p>
</p> <p>Best overview of my thesis can be seen in the project poster below (also downloadable as a <a href="/s/b-poster.pdf">PDF</a>).</p>
<p>You can also download a <a href="/s/helenos-rust-x86_64.iso">HelenOS bootable ISO with preinstalled Rust programs</a>. Run it with QEMU like this:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">qemu-system-x86_64</span><span style="color:#79B8FF"> -device</span><span style="color:#9ECBFF"> e1000,netdev=n1</span><span style="color:#79B8FF"> -netdev</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#E1E4E8">user,id=n1,hostfwd=tcp::8080-:8080,hostfwd=tcp::8081-:8081 </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#E1E4E8">-usb </span><span style="color:#79B8FF">-device</span><span style="color:#9ECBFF"> nec-usb-xhci,id=xhci</span><span style="color:#79B8FF"> -device</span><span style="color:#9ECBFF"> usb-tablet</span><span style="color:#79B8FF"> -device</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#E1E4E8">intel-hda </span><span style="color:#79B8FF">-device</span><span style="color:#9ECBFF"> hda-duplex</span><span style="color:#79B8FF"> -serial</span><span style="color:#9ECBFF"> stdio</span><span style="color:#79B8FF"> -boot</span><span style="color:#9ECBFF"> d</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#E1E4E8">-m </span><span style="color:#9ECBFF">2G</span><span style="color:#79B8FF"> -enable-kvm</span><span style="color:#79B8FF"> -cdrom</span><span style="color:#9ECBFF"> helenos-rust-x86_64.iso</span></span></code></pre>
<p>The following Rust applications are installed in the system: <code>rtest</code> (a test suite), <a href="https://github.com/chksum-rs/cli"><code>chksum</code></a>, <a href="https://github.com/linebender/resvg"><code>resvg</code></a>, <a href="https://github.com/theotherphil/imagecli"><code>imagecli</code></a>, <a href="https://github.com/mvolfik/helenos-iced-apps"><code>imageviewer-rs</code></a> and <a href="https://github.com/mvolfik/helenos-iced-apps"><code>life</code></a>.</p>
<p>Relevant code links:</p>
<ul>
<li><a href="https://github.com/rust-lang/rust/compare/master...mvolfik:rust:helenos">full set of changes to <code>rustc</code> and Rust standard library</a></li>
<li><a href="https://github.com/HelenOS/helenos/pulls?q=is%3Apr+author%3Amvolfik+">contributions to HelenOS</a></li>
<li><a href="https://github.com/mvolfik/helenos-iced-apps">HelenOS runtime for Iced + two GUI apps</a></li>
</ul>
<p><img alt="Project poster" loading="lazy" decoding="async" fetchpriority="auto" sizes="(min-width: 4967px) 4967px, 100vw"  data-astro-image="constrained" width="4967" height="7022" src="/_astro/b-poster.pTHHTmWe_ZiaUcT.webp" srcset="/_astro/b-poster.pTHHTmWe_Z18KHBh.webp 640w, /_astro/b-poster.pTHHTmWe_Z280xaK.webp 750w, /_astro/b-poster.pTHHTmWe_2doAhO.webp 828w, /_astro/b-poster.pTHHTmWe_1tImzv.webp 1080w, /_astro/b-poster.pTHHTmWe_2mO8qj.webp 1280w, /_astro/b-poster.pTHHTmWe_ZSg5rT.webp 1668w, /_astro/b-poster.pTHHTmWe_2mEfgR.webp 2048w, /_astro/b-poster.pTHHTmWe_Z1vG6dJ.webp 2560w, /_astro/b-poster.pTHHTmWe_ZiaUcT.webp 4967w"></p> </main> <footer data-astro-cid-6vkduold> <p data-astro-cid-6vkduold> <small data-astro-cid-6vkduold>
Powered by <a href="https://astro.build/" data-astro-cid-6vkduold>Astro</a>; Hosted on GitHub
          Pages
</small> </p> </footer> </div>  </body></html> 